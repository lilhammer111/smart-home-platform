path: main.go
update_behavior:
  type: skip
body: |-
  package main

  import (
    "{{.Module}}/conf/suite"
    "github.com/cloudwego/kitex/pkg/klog"
    {{- if eq .Codec "thrift"}}
    "github.com/cloudwego/kitex/pkg/transmeta"
    {{- end }}
    "github.com/cloudwego/kitex/server"
    "{{.ImportPath}}/{{ToLower .ServiceName}}"
  )

  func main() {
    svr := {{ToLower .ServiceName}}.NewServer(
        new({{.ServiceName}}Impl),
        server.WithSuite(&suite.BasicSuite{
  	        MicroservicePort: 5555, // 5555 for test
        }),
    )

    err := svr.Run()
    if err != nil {
        klog.Error("############################   failed to run server    ############################\n")
        klog.Errorf("############################   %s   ############################", err)
    }
  }